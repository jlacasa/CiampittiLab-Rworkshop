# recipe
5+5
10^10
mean(c(1,5))
# Sum 5 plus 5
Sum 5 plus 5
library(tidyverse)
knitr::opts_chunk$set(echo = TRUE, message = F, warning = F)
v1 <- 5 # create any type of object
v2 <- "hola"
v1
V1
v1 <- "five" # and overwrite it
v1 <- 5 # create any type of object
v1 <- "five" # and overwrite it
v1 <- "jhshfb" # and overwrite it
remove(v1, v2)
5+5
v1
# help(mean)
# F1
my_vector <- c(5,6,8,45,12)
mean(my_vector)
mean(my_vector)
my_mean <- mean(my_vector)
my_mean
# help(mean)
# F1
my_vector <- c(5,6,NA,45,12)
my_mean <- mean(my_vector)
my_mean
mean(my_vector)
mean(my_vector, na.rm = TRUE)
mean(my_vector)
mean(my_vector, na.rm = TRUE)
library(tidyverse)
read.csv("../data/USDAsurvey_00-18.csv")
read.csv("../data/USDAsurvey_00-18.csv")
usda <- read.csv("../data/USDAsurvey_00-18.csv")
usda
select(usda, Year, State)
usda
select(starts_with("Ag."))
select(usda, starts_with("Ag."))
* `filter()`: selects ROWS that satisfty a logic test
usda
filter(usda,
Year<2010)
filter(usda,
between(Year, 2005, 2015))
df1 <- read.csv("../data/tillage.csv") # https://doi.org/10.6084/m9.figshare.12155553
colnames(df1)
View(df1)
df1 <- rename(df1,
author = `ï..Author`,
start = `Initial.year.of.NT.practice...or.first.year.of.experiment.if.missing.`)
View(df1)
df1 <- mutate(df1, difference = Yield.of.CT-Yield.of.NT)# ... etc
View(df1)
df1 <- mutate(df1, difference = Yield.of.CT-Yield.of.NT)# ... etc
df1
df1 <- filter(df1, between(difference, -100, 100))
df1 <- arrange(df1, difference)
head(df1)
df1 %>%
rename(author= `ï..Author`,
start = `Initial.year.of.NT.practice...or.first.year.of.experiment.if.missing.`)# %>%
# again from scratch. What would happen otherwise?
df1 <- read.csv("../data/tillage.csv") # https://doi.org/10.6084/m9.figshare.12155553
df1 %>%
rename(author= `ï..Author`,
start = `Initial.year.of.NT.practice...or.first.year.of.experiment.if.missing.`)# %>%
View(df1)
df1 <- rename(df1,
author = `ï..Author`,
start = `Initial.year.of.NT.practice...or.first.year.of.experiment.if.missing.`)
# again from scratch. What would happen otherwise?
df1 <- read.csv("../data/tillage.csv") # https://doi.org/10.6084/m9.figshare.12155553
df1 %>%
rename(author= `ï..Author`,
start = `Initial.year.of.NT.practice...or.first.year.of.experiment.if.missing.`)# %>%
df1 <- df1 %>%
rename(author= `ï..Author`,
start = `Initial.year.of.NT.practice...or.first.year.of.experiment.if.missing.`)# %>%
# again from scratch. What would happen otherwise?
df1 <- read.csv("../data/tillage.csv") # https://doi.org/10.6084/m9.figshare.12155553
df1 %>%
rename(author= `ï..Author`,
start = `Initial.year.of.NT.practice...or.first.year.of.experiment.if.missing.`)# %>%
df1 %>%
rename(author= `ï..Author`,
start = `Initial.year.of.NT.practice...or.first.year.of.experiment.if.missing.`)# %>%
df1 %>%
rename(author= `ï..Author`,
start = `Initial.year.of.NT.practice...or.first.year.of.experiment.if.missing.`) %>%
mutate(difference = Yield.of.CT-Yield.of.NT) #%>%
df1 %>%
rename(author= `ï..Author`,
start = `Initial.year.of.NT.practice...or.first.year.of.experiment.if.missing.`) %>%
mutate(difference = Yield.of.CT-Yield.of.NT) %>%
filter(between(difference, -100, 100)) %>%
arrange(difference)
usda <- read.csv("../data/USDAsurvey_00-18.csv")
usda %>%
group_by(Year)
usda %>%
group_by(Year) %>%
mutate(year_avg=mean(Value))
usda %>%
group_by(Year) %>%
mutate(year_avg=mean(Value)) %>%
dplyr::select(Year, State, County, Value, year_avg)
usda
usda %>%
group_by(Year) %>%
summarise(year_avg=mean(Value))
library(sf)
library(tidyverse)
knitr::opts_chunk$set(echo = TRUE, message=F, warning=F)
usda <- read.csv("../data/USDAsurvey_00-18.csv")
usda
usda %>%
ggplot(aes(Year, Value))
usda %>%
ggplot(aes(Year, Value))+
geom_point()
usda
usda %>%
filter(State=="IOWA") %>%
ggplot(aes(Year, Value))+
geom_point()
#data
usda %>%
filter(State=="IOWA") %>%
ggplot(aes(Year, Value))+
# layers
geom_point()+
geom_smooth()
#data
usda %>%
filter(State=="IOWA") %>%
ggplot(aes(Year, Value))+
# layers
geom_smooth() +
geom_point()
knitr::include_graphics("figs/cheatsheet_ggplot.png")
knitr::include_graphics("../figs/cheatsheet_ggplot.png")
#data
usda %>%
filter(State=="IOWA") %>%
ggplot(aes(Year, Value))+
# layers
geom_point()+
geom_smooth()
#data
usda %>%
filter(State=="IOWA") %>%
ggplot(aes(Year, Value))+
# layers
geom_point(color="tomato")+
geom_smooth(color="black")
usda
#data
usda %>%
filter(State=="IOWA") %>%
ggplot(aes(Year, Value))+
# layers
geom_point(aes(color=County))+
geom_smooth(color="black")
#data
usda %>%
filter(State=="IOWA") %>%
ggplot(aes(Year, Value))+
# layers
geom_point(aes(color=County), show.legend = FALSE)+
geom_smooth(color="black")
#data
usda %>%
filter(State=="IOWA") %>%
ggplot(aes(Year, Value))+
# layers
geom_point(aes(color=County), shape = 21,
#everything inside aes() is mapped color='tomato'
show.legend = FALSE)+
geom_smooth(color="black")
#data
usda %>%
filter(State=="IOWA") %>%
ggplot(aes(Year, Value))+
# layers
geom_point(aes(fill=County), shape = 21,
#everything inside aes() is mapped color='tomato'
show.legend = FALSE)+
geom_smooth(color="black")
#data
usda %>%
filter(State=="IOWA") %>%
ggplot(aes(Year, Value))+
# layers
geom_point(aes(fill=County), shape = 21, alpha = 0.6,
#everything inside aes() is mapped color='tomato'
show.legend = FALSE)+
geom_smooth(color="black")
#data
usda %>%
filter(State=="IOWA") %>%
ggplot(aes(Year, Value))+
# layers
geom_point(aes(fill=County, shape = County), alpha = 0.6,
# everything inside aes() is mapped
# and is used to differenciate btw groups
show.legend = FALSE)+
geom_smooth(color="black")
#data
usda %>%
filter(State=="IOWA") %>%
ggplot(aes(Year, Value))+
# layers
geom_point(aes(color=County, shape = County), alpha = 0.6,
# everything inside aes() is mapped
# and is used to differenciate btw groups
show.legend = FALSE)+
geom_smooth(color="black")
usda
#data
usda %>%
ggplot(aes(Year, Value))+
# layers
geom_point(aes(fill = State), shape = 21, alpha = 0.6,
show.legend = FALSE)+
geom_smooth(color="black")
#data
usda %>%
ggplot(aes(Year, Value))+
# layers
geom_point(aes(fill = State),
shape = 21, alpha = 0.6,
show.legend = FALSE)+
geom_smooth(aes(color = State,
group = State), color="black")
#data
usda %>%
ggplot(aes(Year, Value))+
# layers
geom_point(aes(fill = State),
shape = 21, alpha = 0.6,
show.legend = FALSE)+
geom_smooth(aes(color = State,
group = State))
#data
usda %>%
ggplot(aes(Year, Value))+
# layers
geom_point(aes(fill = State),
shape = 21, alpha = 0.6,
show.legend = FALSE)+
geom_smooth(aes(color = State,
group = State)) + #same for geom_line
scale_x_continuous(limits = c(1990, 2021))
#data
usda %>%
ggplot(aes(Year, Value))+
# layers
geom_point(aes(fill = State),
shape = 21, alpha = 0.6,
show.legend = FALSE)+
geom_smooth(aes(color = State,
group = State)) + #same for geom_line
scale_x_continuous(limits = c(1990, 2021))+
scale_y_continuous(limits = c(0, 300))
knitr::include_graphics("../figs/position-facets.png")
usda %>%
ggplot(aes(Year, Value))
usda %>%
ggplot(aes(Year, Value))+
geom_point()
usda %>%
ggplot(aes(Year, Value))+
geom_point()+
facet_wrap(~State)
usda %>%
ggplot(aes(Value))+
geom_histogram()+
facet_wrap(~State)
usda %>%
ggplot(aes(Value))+
geom_histogram()+
facet_grid(Year~State)
usda %>%
filter(Year %in% c(2010:2013)) %>%
ggplot(aes(Value))+
geom_histogram()+
facet_grid(Year~State)
#data
usda %>%
ggplot(aes(Year, Value))+
# layers
geom_point(aes(fill = State),
shape = 21, alpha = 0.6,
show.legend = FALSE)+
geom_smooth(aes(color = State,
group = State)) + #same for geom_line
scale_x_continuous(limits = c(1990, 2021))+
scale_y_continuous(limits = c(0, 300))+
theme_bw()
#data
usda %>%
ggplot(aes(Year, Value))+
# layers
geom_point(aes(fill = State),
shape = 21, alpha = 0.6,
show.legend = FALSE)+
geom_smooth(aes(color = State,
group = State)) + #same for geom_line
scale_x_continuous(limits = c(1990, 2021))+
scale_y_continuous(limits = c(0, 300))+
theme_classic()
fao <- read.csv("../data/FAOSTAT_data_9-15-2021.csv")
fao
library(sf)
library(rnaturalearth)
library(rnaturalearthdata)
library(rgeos)
world <- ne_countries(scale = "medium", returnclass = "sf")
world %>%
left_join(fao %>% rename(sovereignt=Area)) %>%
ggplot(aes(geometry=geometry))+
geom_sf(aes(fill=Value))+
theme_bw()
world
fao
world %>%
filter(Item == "Wheat") %>%
left_join(fao %>% rename(sovereignt=Area)) %>%
ggplot(aes(geometry=geometry))+
geom_sf(aes(fill=Value))+
theme_bw()
world %>%
left_join(fao %>%
filter(Item == "Wheat") %>%
rename(sovereignt=Area)) %>%
ggplot(aes(geometry=geometry))+
geom_sf(aes(fill=Value))+
theme_bw()
fao
world %>%
left_join(fao %>%
filter(Item == "Wheat") %>%
rename(sovereignt=Area)) %>%
ggplot(aes(geometry=geometry))+
geom_sf(aes(fill=Value))+
facet_grid(~Year)+
theme_bw()
world %>%
left_join(fao %>%
filter(Item == "Wheat") %>%
rename(sovereignt=Area)) %>%
drop_na(Year)
world %>%
left_join(fao %>%
filter(Item == "Wheat") %>%
rename(sovereignt=Area)) %>%
drop_na(Year) %>%
ggplot(aes(geometry=geometry))+
geom_sf(aes(fill=Value))+
facet_grid(~Year)+
theme_bw()
usda %>%
group_by(Year, State, Ag.District) %>%
summarise_at(vars(Value), funs(mean)) %>%
ggplot(aes(y = Year, x = Value))+
geom_smooth()+
theme_bw()
usda %>%
group_by(Year, State, Ag.District) %>%
summarise_at(vars(Value), funs(mean)) %>%
ggplot(aes(x = Year, y = Value))+
geom_smooth()+
theme_bw()
lotus <- read.csv("../data/lotus.csv")
lotus
lotus %>%
ggplot(aes(rsum, pac))+
geom_point()
